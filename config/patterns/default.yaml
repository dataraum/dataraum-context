# Default Pattern Detection Configuration
#
# Patterns are used during profiling to infer column types
# and semantic meaning from value structure.

name: default
version: "1.0.0"
description: Standard patterns for type inference and semantic detection

# Date and Time Patterns
date_patterns:
  - name: iso_date
    pattern: '^\d{4}-\d{2}-\d{2}$'
    inferred_type: DATE
    examples: ["2024-01-15", "2023-12-31"]
    
  - name: iso_datetime
    pattern: '^\d{4}-\d{2}-\d{2}[T ]\d{2}:\d{2}:\d{2}'
    inferred_type: TIMESTAMP
    examples: ["2024-01-15T10:30:00", "2024-01-15 10:30:00"]
    
  - name: us_date
    pattern: '^\d{1,2}/\d{1,2}/\d{2,4}$'
    inferred_type: DATE
    examples: ["1/15/2024", "01/15/24"]
    ambiguous: true  # Could be MM/DD or DD/MM
    
  - name: eu_date
    pattern: '^\d{1,2}\.\d{1,2}\.\d{2,4}$'
    inferred_type: DATE
    examples: ["15.01.2024", "15.1.24"]
    
  - name: time_only
    pattern: '^\d{1,2}:\d{2}(:\d{2})?$'
    inferred_type: TIME
    examples: ["10:30", "10:30:00"]

# Identifier Patterns
identifier_patterns:
  - name: uuid
    pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
    inferred_type: VARCHAR
    semantic_type: key
    examples: ["550e8400-e29b-41d4-a716-446655440000"]
    
  - name: email
    pattern: '^[^@\s]+@[^@\s]+\.[^@\s]+$'
    inferred_type: VARCHAR
    semantic_type: identifier
    pii: true
    examples: ["user@example.com"]
    
  - name: phone_intl
    pattern: '^\+\d{1,3}[\d\s\-]{7,}$'
    inferred_type: VARCHAR
    semantic_type: identifier
    pii: true
    examples: ["+1 555-123-4567", "+41 79 123 45 67"]
    
  - name: url
    pattern: '^https?://[^\s]+$'
    inferred_type: VARCHAR
    semantic_type: reference
    examples: ["https://example.com/path"]

# Numeric Patterns
numeric_patterns:
  - name: integer
    pattern: '^-?\d+$'
    inferred_type: BIGINT
    examples: ["123", "-456", "0"]
    
  - name: decimal_dot
    pattern: '^-?\d+\.\d+$'
    inferred_type: DOUBLE
    examples: ["123.45", "-0.5"]
    
  - name: decimal_comma
    pattern: '^-?\d+,\d+$'
    inferred_type: DOUBLE
    locale: "eu"
    examples: ["123,45", "-0,5"]
    
  - name: scientific
    pattern: '^-?\d+\.?\d*[eE][+-]?\d+$'
    inferred_type: DOUBLE
    examples: ["1.23e10", "-4.5E-3"]
    
  - name: percentage
    pattern: '^-?\d+\.?\d*%$'
    inferred_type: DOUBLE
    semantic_type: percentage
    examples: ["45%", "12.5%", "-3%"]

# Currency Patterns
currency_patterns:
  - name: currency_usd
    pattern: '^\$[\d,]+\.?\d*$'
    inferred_type: DOUBLE
    detected_unit: USD
    examples: ["$1,234.56", "$100"]
    
  - name: currency_eur
    pattern: '^€[\d\s.]+,?\d*$|^[\d\s.]+,?\d*\s*€$'
    inferred_type: DOUBLE
    detected_unit: EUR
    examples: ["€1.234,56", "1.234,56 €"]
    
  - name: currency_gbp
    pattern: '^£[\d,]+\.?\d*$'
    inferred_type: DOUBLE
    detected_unit: GBP
    examples: ["£1,234.56"]
    
  - name: currency_chf
    pattern: '^CHF\s*[\d\x27]+\.?\d*$|^[\d\x27]+\.?\d*\s*CHF$'
    inferred_type: DOUBLE
    detected_unit: CHF
    examples: ["CHF 1'234.56", "1'234.56 CHF"]

# Boolean Patterns
boolean_patterns:
  - name: boolean_tf
    pattern: '^(true|false)$'
    inferred_type: BOOLEAN
    case_sensitive: false
    
  - name: boolean_yn
    pattern: '^(yes|no|y|n)$'
    inferred_type: BOOLEAN
    case_sensitive: false
    
  - name: boolean_10
    pattern: '^[01]$'
    inferred_type: BOOLEAN
    # Only if column has exactly these two values

# Column Name Patterns (for semantic inference)
column_name_patterns:
  - pattern: '.*_id$'
    likely_role: key
    
  - pattern: '.*_at$'
    likely_role: timestamp
    likely_type: TIMESTAMP
    
  - pattern: '.*_date$'
    likely_role: timestamp
    likely_type: DATE
    
  - pattern: '.*_amt$|.*_amount$'
    likely_role: measure
    likely_type: DOUBLE
    
  - pattern: '.*_qty$|.*_quantity$'
    likely_role: measure
    likely_type: INTEGER
    
  - pattern: '.*_pct$|.*_percent.*'
    likely_role: measure
    semantic_type: percentage
    
  - pattern: '.*_code$|.*_type$'
    likely_role: dimension
    
  - pattern: '^is_.*|^has_.*'
    likely_type: BOOLEAN
