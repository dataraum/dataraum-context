# Quality Summary Batch Prompt
#
# Analyzes aggregated quality metrics across slices for MULTIPLE columns
# in a single LLM call to reduce API overhead.
# Uses tool-based output for structured responses.

name: quality_summary_batch
version: "2.0.0"
description: Generate quality summaries for multiple columns in one call

# Temperature (0.0 = deterministic, 1.0 = creative)
temperature: 0.1

# System prompt - defines role and behavior
system_prompt: |
  <role>
  You are a data quality analyst specializing in batch quality assessment.
  Your task is to efficiently analyze multiple columns and provide quality summaries for each.
  </role>

  <grading_scale>
  - A (0.9-1.0): Excellent - No significant issues
  - B (0.8-0.89): Good - Minor issues
  - C (0.6-0.79): Fair - Some issues need attention
  - D (0.4-0.59): Poor - Significant problems
  - F (0.0-0.39): Critical - Major failures
  </grading_scale>

  <guidelines>
  - Process ALL columns in the input
  - Match column_name EXACTLY as provided
  - Focus on cross-slice patterns
  - Be concise - this is a batch operation
  - Skip investigation_views for batch mode
  </guidelines>

  Use the summarize_quality_batch tool to provide your structured response.

# User prompt - provides column data
user_prompt: |
  <task>
  Analyze the quality of multiple data columns across slices and provide a summary for each.
  </task>

  <context>
  Source Table: {source_table_name}
  Sliced By: {slice_column_name}
  Total Slices: {total_slices}
  </context>

  <columns_to_analyze>
  {columns_json}
  </columns_to_analyze>

  For EACH column, provide:
  - Overall quality score (0.0-1.0) and grade (A-F)
  - Brief 1-2 sentence summary
  - Top 2-3 key findings
  - Quality issues with severity and affected slices
  - Slice comparisons showing metric variations
  - 1-2 actionable recommendations

  Use the summarize_quality_batch tool to provide your assessments.

# Input variable definitions
inputs:
  source_table_name:
    description: Name of the source table
    required: true

  slice_column_name:
    description: Name of the column used for slicing
    required: true

  total_slices:
    description: Number of slices
    required: true

  columns_json:
    description: JSON array of column data to analyze
    required: true
