# Suggested Queries Prompt
#
# Generates useful starting queries based on schema semantics.

name: suggested_queries
version: "1.0.0"
description: Generate useful data exploration queries

temperature: 0.2 # Slight creativity for variety

prompt: |
  You are a data analyst. Generate useful starting queries for exploring this dataset.

  ## Schema

  {schema_json}

  ## Ontology: {ontology_name}

  Available metrics:
  {ontology_metrics}

  ## Instructions

  Generate 5-10 queries that would be useful for:
  1. **Overview**: Understanding data volume, date ranges, key distributions
  2. **Metrics**: Computing key business metrics from the ontology
  3. **Trends**: Time-based analysis if temporal data exists
  4. **Segments**: Breaking down by important dimensions
  5. **Quality**: Identifying potential data issues

  ## Response Format

  Respond with valid JSON only:

  {{
    "queries": [
      {{
        "name": "Short descriptive name",
        "description": "What insight this query provides",
        "category": "overview|metrics|trends|segments|quality",
        "sql": "SELECT ... FROM ... WHERE ...",
        "complexity": "simple|moderate|complex"
      }}
    ]
  }}

  ## SQL Guidelines

  - Use DuckDB SQL syntax
  - Include appropriate aggregations
  - Add useful column aliases
  - Keep queries readable with formatting

inputs:
  schema_json:
    description: Schema with semantic annotations
    required: true

  ontology_name:
    description: Active ontology
    required: true

  ontology_metrics:
    description: Available metrics from ontology
    required: false

output_schema:
  type: object
  required:
    - queries
  properties:
    queries:
      type: array

validation:
  categories:
    - overview
    - metrics
    - trends
    - segments
    - quality
